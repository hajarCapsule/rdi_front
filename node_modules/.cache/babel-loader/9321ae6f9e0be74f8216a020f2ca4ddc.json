{"ast":null,"code":"var _jsxFileName = \"/home/okajimmy/lacapsule/roomDirectory/roomDirectoryIndi/reactApp/src/component/OrderPage .js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport 'antd/dist/antd.css';\nimport { Card, Radio, InputNumber, Modal, Divider } from 'antd';\nimport { CardText, CardTitle, CardSubtitle, Button } from 'reactstrap'; //import de l'accordion de la librairie MATERIEL UI\n\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Typography } from 'antd';\nimport { Redirect } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport NavBar from './NavBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction OrderPage(props) {\n  _s();\n\n  //Déclaration des ETATS\n  const [food, setFood] = useState([]);\n  const [foodDetails, setFoodDetails] = useState([]);\n  const [tabOrderFood, setTabOrderFood] = useState([]);\n  const [quantity, setQuantity] = useState(1);\n  const [place, setPlace] = useState(\"En Chambre\");\n  const [visible, setVisible] = useState(false);\n  const [isModalVisible, setIsModalVisible] = useState(false); //Au chargement de la page récupérer le détail du petit déj sélectionné\n\n  useEffect(() => {\n    var getFood = async () => {\n      var response = await fetch(`/restauration/${props.match.params.route}/${props.match.params.id}`);\n      var data = await response.json();\n      setFood(data.food);\n      setFoodDetails(data.food.detail);\n    };\n\n    getFood();\n  }, []); //Fonction qui affiche le PopUp et exécute la fonction de confirmation handleSubmit\n\n  const showModal = () => {\n    setIsModalVisible(true);\n    handleSubmit();\n  }; //Fonction qui gère l'affichage du popup\n\n\n  const handleOk = () => {\n    setIsModalVisible(false);\n    setVisible(true);\n  }; //Conversion du tableau d'objet en string pour l'envoyer au back\n\n\n  var details = JSON.stringify({\n    tabOrderFood\n  }); //Création dune copier du tableau tabOrderFood en pushant le type et la quantité du choix\n\n  function onChange(value, entry) {\n    setTabOrderFood([...tabOrderFood, {\n      type: entry,\n      quantity: value\n    }]);\n  } //Enregistrement de la commande dans le back//  \n\n\n  var handleSubmit = async () => {\n    const data = fetch(`/orderConfirmation`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      body: `details=${details}&token=${props.token}&foodID=${food._id}&lieu=${place}&quantity=${quantity}&price=${food.prix * quantity}`\n    });\n  }; //Redirection vers Home au click sur ok du popup//\n\n\n  if (visible) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginTop: 40\n      },\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          width: 550,\n          height: '60%'\n        },\n        cover: /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"example\",\n          src: food.image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 18\n        }, this),\n        children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n          tag: \"h2\",\n          children: [/*#__PURE__*/_jsxDEV(InputNumber, {\n            min: 1,\n            max: 10,\n            defaultValue: 1,\n            onChange: e => setQuantity(e),\n            style: {\n              width: 50\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), \" x \", food.nameArticle]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardSubtitle, {\n          tag: \"h3\",\n          className: \"mb-2 text-muted\",\n          children: [food.prix, \" \\u20AC\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardText, {\n          children: food.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardText, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Radio.Group, {\n              onChange: e => {\n                e.target.value == 1 ? setPlace(\"En Chambre\") : setPlace(\"Sur Place\");\n              },\n              name: \"radiogroup\",\n              defaultValue: 1,\n              children: [/*#__PURE__*/_jsxDEV(Radio, {\n                value: 1,\n                children: \"En chambre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Radio, {\n                value: 2,\n                children: \"Sur Place\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: showModal,\n              children: \"Confirmer ma commande\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardText, {\n          children: \"Faites votre Choix :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), foodDetails.map(objectName => {\n          return Object.keys(objectName).map(category => {\n            return /*#__PURE__*/_jsxDEV(Accordion, {\n              children: [/*#__PURE__*/_jsxDEV(AccordionSummary, {\n                expandIcon: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 33\n                }, this),\n                \"aria-controls\": \"panel1a-content\",\n                id: \"panel1a-header\",\n                style: {\n                  backgroundColor: '#AADEC0',\n                  opacity: 0.4\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 19\n              }, this), objectName[category].map(entry => {\n                return /*#__PURE__*/_jsxDEV(AccordionDetails, {\n                  style: {\n                    borderWidth: 3,\n                    borderColor: 'white',\n                    borderStyle: 'solid',\n                    backgroundColor: '#F8F8F8'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    children: [/*#__PURE__*/_jsxDEV(InputNumber, {\n                      min: 1,\n                      max: 10,\n                      defaultValue: 0,\n                      onChange: e => {\n                        onChange(e, entry);\n                      },\n                      style: {\n                        width: 50\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 25\n                    }, this), \" x  \", entry]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 29\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 17\n            }, this);\n          });\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        title: \"Confirmation\",\n        visible: isModalVisible,\n        onOk: handleOk,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Votre Confirmation a \\xE9t\\xE9 pris en compte !!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(OrderPage, \"K6bqMgSv0eluLsHGvcRfKH/+YcU=\");\n\n_c = OrderPage;\n\nfunction mapStateToProps(state) {\n  console.log(state.token);\n  return {\n    token: state.token\n  };\n}\n\nexport default connect(mapStateToProps, null)(OrderPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderPage\");","map":{"version":3,"sources":["/home/okajimmy/lacapsule/roomDirectory/roomDirectoryIndi/reactApp/src/component/OrderPage .js"],"names":["React","useState","useEffect","makeStyles","Card","Radio","InputNumber","Modal","Divider","CardText","CardTitle","CardSubtitle","Button","Accordion","AccordionDetails","AccordionSummary","ExpandMoreIcon","Typography","Redirect","connect","NavBar","OrderPage","props","food","setFood","foodDetails","setFoodDetails","tabOrderFood","setTabOrderFood","quantity","setQuantity","place","setPlace","visible","setVisible","isModalVisible","setIsModalVisible","getFood","response","fetch","match","params","route","id","data","json","detail","showModal","handleSubmit","handleOk","details","JSON","stringify","onChange","value","entry","type","method","headers","body","token","_id","prix","display","justifyContent","marginTop","width","height","image","e","nameArticle","description","target","map","objectName","Object","keys","category","backgroundColor","opacity","borderWidth","borderColor","borderStyle","mapStateToProps","state","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport 'antd/dist/antd.css';\nimport { Card, Radio, InputNumber, Modal, Divider } from 'antd';\nimport { CardText, CardTitle, CardSubtitle, Button } from 'reactstrap';\n\n//import de l'accordion de la librairie MATERIEL UI\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport { Typography } from 'antd';\nimport { Redirect } from 'react-router-dom'\nimport { connect } from \"react-redux\";\n\nimport NavBar from './NavBar'\n\n\nfunction OrderPage(props) {\n\n  //Déclaration des ETATS\n  const [food, setFood] = useState([]);\n  const [foodDetails, setFoodDetails] = useState([]);\n  const [tabOrderFood, setTabOrderFood] = useState([]);\n  const [quantity, setQuantity] = useState(1);\n  const [place, setPlace] = useState(\"En Chambre\");\n  const [visible, setVisible] = useState(false);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  //Au chargement de la page récupérer le détail du petit déj sélectionné\n  useEffect(() => {\n    var getFood = async () => {\n      var response = await fetch(`/restauration/${props.match.params.route}/${props.match.params.id}`);\n      var data = await response.json();\n      setFood(data.food);\n      setFoodDetails(data.food.detail)\n    }\n    getFood();\n  }, []);\n\n  //Fonction qui affiche le PopUp et exécute la fonction de confirmation handleSubmit\n  const showModal = () => {\n    setIsModalVisible(true);\n    handleSubmit()\n  };\n\n  //Fonction qui gère l'affichage du popup\n  const handleOk = () => {\n    setIsModalVisible(false);\n    setVisible(true)\n  };\n\n\n  //Conversion du tableau d'objet en string pour l'envoyer au back\n  var details = JSON.stringify({ tabOrderFood })\n\n  //Création dune copier du tableau tabOrderFood en pushant le type et la quantité du choix\n  function onChange(value, entry) {\n    setTabOrderFood([...tabOrderFood, { type: entry, quantity: value }])\n  }\n\n  //Enregistrement de la commande dans le back//  \n  var handleSubmit = async () => {\n    const data = fetch(`/orderConfirmation`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n      body: `details=${details}&token=${props.token}&foodID=${food._id}&lieu=${place}&quantity=${quantity}&price=${food.prix * quantity}`,\n    });\n  };\n\n  //Redirection vers Home au click sur ok du popup//\n  if (visible) {\n    return <Redirect to='/home' />\n  }\n\n  return (\n    <>\n      <NavBar />\n      <div style={{ display: 'flex', justifyContent: 'center', marginTop: 40 }}>\n\n        {/*Card de la page */}\n        <Card\n          style={{ width: 550, height: '60%' }}\n          cover={<img alt=\"example\" src={food.image} />} >\n          <CardTitle tag=\"h2\">\n\n            {/*Champ input de la quantité du petit dej */}\n            <InputNumber min={1} max={10} defaultValue={1} onChange={e => setQuantity(e)} style={{ width: 50 }} /> x {food.nameArticle}</CardTitle>\n          <CardSubtitle tag=\"h3\" className=\"mb-2 text-muted\">{food.prix} €</CardSubtitle>\n          <CardText>{food.description}</CardText>\n\n          <Divider />\n\n          <CardText>\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n\n              {/*Radio Boutton et enregistrement de lieu dans setplace */}\n              <Radio.Group onChange={e => { e.target.value == 1 ? setPlace(\"En Chambre\") : setPlace(\"Sur Place\") }} name=\"radiogroup\" defaultValue={1} >\n                <Radio value={1}>En chambre</Radio>\n                <Radio value={2}>Sur Place</Radio>\n              </Radio.Group>\n\n              {/*Button confirmation de la commande et affichage du popup */}\n              <Button onClick={showModal}>Confirmer ma commande</Button>\n            </div>\n            <Divider />\n          </CardText>\n          <CardText>Faites votre Choix :</CardText>\n          {foodDetails.map(objectName => {\n            return Object.keys(objectName).map(category => {\n              return (\n                \n                <Accordion >\n                  <AccordionSummary\n                    expandIcon={<ExpandMoreIcon />}\n                    aria-controls=\"panel1a-content\"\n                    id=\"panel1a-header\"\n                    style={{ backgroundColor: '#AADEC0', opacity: 0.4 }}\n                  >\n                    <Typography >{category}</Typography>\n                  </AccordionSummary>\n\n                   {/*Button confirmation de la commande et affichage du popup */}\n                  {objectName[category].map(entry => {\n                    return (<AccordionDetails style={{ borderWidth: 3, borderColor: 'white', borderStyle: 'solid', backgroundColor: '#F8F8F8' }}>\n                      <Typography>\n                        <InputNumber min={1} max={10} defaultValue={0} onChange={(e) => { onChange(e, entry) }} style={{ width: 50 }} /> x  {entry}</Typography>\n                    </AccordionDetails>\n                    )\n                  })}\n                </Accordion>\n              )\n            })\n          })}\n\n        </Card>\n        <Modal title=\"Confirmation\" visible={isModalVisible} onOk={handleOk} >\n          <p>Votre Confirmation a été pris en compte !!</p>\n\n        </Modal>\n      </div>\n\n    </>\n\n  )\n}\n\nfunction mapStateToProps(state) {\n  console.log(state.token)\n  return { token: state.token };\n}\nexport default connect(mapStateToProps, null)(OrderPage);\n"]},"metadata":{},"sourceType":"module"}