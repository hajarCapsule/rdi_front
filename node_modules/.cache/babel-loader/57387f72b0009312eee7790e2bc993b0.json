{"ast":null,"code":"var _jsxFileName = \"/home/okajimmy/lacapsule/roomDirectory/roomDirectoryIndi/reactApp/src/component/OrderPage .js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport 'antd/dist/antd.css';\nimport { Card, Radio, InputNumber, Modal, Divider } from 'antd';\nimport { CardText, CardTitle, CardSubtitle, Button } from 'reactstrap'; //import de l'accordion de la librairie MATERIEL UI\n\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Typography } from 'antd';\nimport { Redirect } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport NavBar from './NavBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction OrderPage(props) {\n  _s();\n\n  //Déclaration des ETATS\n  const [food, setFood] = useState([]);\n  const [foodDetails, setFoodDetails] = useState([]);\n  const [tabOrderFood, setTabOrderFood] = useState([]);\n  const [quantity, setQuantity] = useState(1);\n  const [place, setPlace] = useState(\"En Chambre\");\n  const [visible, setVisible] = useState(false);\n  const [isModalVisible, setIsModalVisible] = useState(false); //Au chargement de la page récupérer le détail du petit déj sélectionné\n\n  useEffect(() => {\n    var getFood = async () => {\n      var response = await fetch(`/restauration/${props.match.params.route}/${props.match.params.id}`);\n      var data = await response.json();\n      setFood(data.food);\n      setFoodDetails(data.food.detail);\n    };\n\n    getFood();\n  }, []); //Fonction qui affiche le PopUp et exécute la fonction de confirmation handleSubmit\n\n  const showModal = () => {\n    setIsModalVisible(true);\n    handleSubmit();\n  }; //Fonction qui gère l'affichage du popup\n\n\n  const handleOk = () => {\n    setIsModalVisible(false);\n    setVisible(true);\n  };\n\n  foodDetails.map(category => {\n    return Object.keys(category).map(cat => {\n      return console.log(cat);\n    });\n  });\n  var details = JSON.stringify({\n    tabOrderFood\n  });\n\n  function onChange(value, entry) {\n    setTabOrderFood([...tabOrderFood, {\n      type: entry,\n      quantity: value\n    }]);\n  } //Enregistrement de la commande dans le back//  \n\n\n  var handleSubmit = async () => {\n    const data = fetch(`/orderConfirmation`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      body: `details=${details}&token=${props.token}&foodID=${food._id}&lieu=${place}&quantity=${quantity}&price=${food.prix * quantity}`\n    });\n  }; //Redirection vers Home au click sur ok du popup//\n\n\n  if (visible) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 10\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginTop: 40\n      },\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          width: 550,\n          height: '60%'\n        },\n        cover: /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"example\",\n          src: food.image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 18\n        }, this),\n        children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n          tag: \"h2\",\n          children: [/*#__PURE__*/_jsxDEV(InputNumber, {\n            min: 1,\n            max: 10,\n            defaultValue: 1,\n            onChange: e => setQuantity(e),\n            style: {\n              width: 50\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 11\n          }, this), \" x \", food.nameArticle]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardSubtitle, {\n          tag: \"h3\",\n          className: \"mb-2 text-muted\",\n          children: [food.prix, \" \\u20AC\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardText, {\n          children: food.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardText, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Radio.Group, {\n              onChange: e => {\n                e.target.value == 1 ? setPlace(\"En Chambre\") : setPlace(\"Sur Place\");\n              },\n              name: \"radiogroup\",\n              defaultValue: 1,\n              children: [/*#__PURE__*/_jsxDEV(Radio, {\n                value: 1,\n                children: \"En chambre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Radio, {\n                value: 2,\n                children: \"Sur Place\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: showModal,\n              children: \"Confirmer ma commande\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardText, {\n          children: \"Faites votre Choix :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), foodDetails.map(objectName => {\n          return Object.keys(objectName).map(category => {\n            return /*#__PURE__*/_jsxDEV(Accordion, {\n              children: [/*#__PURE__*/_jsxDEV(AccordionSummary, {\n                expandIcon: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 33\n                }, this),\n                \"aria-controls\": \"panel1a-content\",\n                id: \"panel1a-header\",\n                style: {\n                  backgroundColor: '#AADEC0',\n                  opacity: 0.4\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  children: category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 19\n              }, this), objectName[category].map(entry => {\n                return /*#__PURE__*/_jsxDEV(AccordionDetails, {\n                  style: {\n                    borderWidth: 3,\n                    borderColor: 'white',\n                    borderStyle: 'solid',\n                    backgroundColor: '#F8F8F8'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    children: [/*#__PURE__*/_jsxDEV(InputNumber, {\n                      min: 1,\n                      max: 10,\n                      defaultValue: 0,\n                      onChange: e => {\n                        onChange(e, entry);\n                      },\n                      style: {\n                        width: 50\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 123,\n                      columnNumber: 25\n                    }, this), \" x  \", entry]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 29\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this);\n          });\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        title: \"Confirmation\",\n        visible: isModalVisible,\n        onOk: handleOk,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Votre Confirmation a \\xE9t\\xE9 pris en compte !!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(OrderPage, \"K6bqMgSv0eluLsHGvcRfKH/+YcU=\");\n\n_c = OrderPage;\n\nfunction mapStateToProps(state) {\n  console.log(state.token);\n  return {\n    token: state.token\n  };\n}\n\nexport default connect(mapStateToProps, null)(OrderPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderPage\");","map":{"version":3,"sources":["/home/okajimmy/lacapsule/roomDirectory/roomDirectoryIndi/reactApp/src/component/OrderPage .js"],"names":["React","useState","useEffect","makeStyles","Card","Radio","InputNumber","Modal","Divider","CardText","CardTitle","CardSubtitle","Button","Accordion","AccordionDetails","AccordionSummary","ExpandMoreIcon","Typography","Redirect","connect","NavBar","OrderPage","props","food","setFood","foodDetails","setFoodDetails","tabOrderFood","setTabOrderFood","quantity","setQuantity","place","setPlace","visible","setVisible","isModalVisible","setIsModalVisible","getFood","response","fetch","match","params","route","id","data","json","detail","showModal","handleSubmit","handleOk","map","category","Object","keys","cat","console","log","details","JSON","stringify","onChange","value","entry","type","method","headers","body","token","_id","prix","display","justifyContent","marginTop","width","height","image","e","nameArticle","description","target","objectName","backgroundColor","opacity","borderWidth","borderColor","borderStyle","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport 'antd/dist/antd.css';\nimport { Card, Radio, InputNumber, Modal, Divider } from 'antd';\nimport {CardText,CardTitle, CardSubtitle, Button} from 'reactstrap';\n\n//import de l'accordion de la librairie MATERIEL UI\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport { Typography } from 'antd';\nimport { Redirect } from 'react-router-dom'\nimport { connect } from \"react-redux\";\n\nimport NavBar from './NavBar'\n\n\nfunction OrderPage(props) {\n  \n  //Déclaration des ETATS\n  const [food, setFood] = useState([]);\n  const [foodDetails, setFoodDetails] = useState([]);\n  const [tabOrderFood, setTabOrderFood] = useState([]);\n  const [quantity, setQuantity] = useState(1);\n  const [place, setPlace] = useState(\"En Chambre\");\n  const [visible, setVisible] = useState(false);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  //Au chargement de la page récupérer le détail du petit déj sélectionné\n  useEffect(() => {\n    var getFood = async () => {\n      var response = await fetch(`/restauration/${props.match.params.route}/${props.match.params.id}`);\n      var data = await response.json();\n      setFood(data.food);\n      setFoodDetails(data.food.detail)\n    }\n    getFood();\n  }, []);\n\n  //Fonction qui affiche le PopUp et exécute la fonction de confirmation handleSubmit\n  const showModal = () => {\n    setIsModalVisible(true);\n    handleSubmit()\n  };\n\n  //Fonction qui gère l'affichage du popup\n  const handleOk = () => {\n    setIsModalVisible(false);\n    setVisible(true)\n  };\n\n\n  foodDetails.map(category => { return Object.keys(category).map(cat => { return console.log(cat) }) })\n\nvar details = JSON.stringify({tabOrderFood})\n\n\nfunction onChange(value,entry) {\n    setTabOrderFood([...tabOrderFood,{type:entry,quantity:value}])\n  }\n\n//Enregistrement de la commande dans le back//  \nvar handleSubmit = async () => {\n  const data = fetch(`/orderConfirmation`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n    body: `details=${details}&token=${props.token}&foodID=${food._id}&lieu=${place}&quantity=${quantity}&price=${food.prix*quantity}`,\n  });\n};\n\n//Redirection vers Home au click sur ok du popup//\nif(visible){\n  return <Redirect to='/home' />\n}\n\n  return (\n    <>\n      <NavBar />\n      <div style={{ display: 'flex', justifyContent: 'center', marginTop: 40 }}>\n\n        {/*Card de la page */}\n        <Card\n          style={{ width: 550, height: '60%' }}\n          cover={<img alt=\"example\" src={food.image} />} >\n          <CardTitle tag=\"h2\"> \n          \n          {/*Champ input de la quantité du petit dej */}\n          <InputNumber min={1} max={10} defaultValue={1} onChange={e=>setQuantity(e)} style={{ width: 50 }} /> x {food.nameArticle}</CardTitle>\n          <CardSubtitle tag=\"h3\" className=\"mb-2 text-muted\">{food.prix} €</CardSubtitle>\n          <CardText>{food.description}</CardText>\n\n          <Divider />\n\n          <CardText>\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n\n              {/*Champ input de la quantité du petit dej */}\n              <Radio.Group onChange={e=>{e.target.value==1 ?setPlace(\"En Chambre\"):setPlace(\"Sur Place\")}} name=\"radiogroup\" defaultValue={1} >\n                <Radio value={1}>En chambre</Radio>\n                <Radio value={2}>Sur Place</Radio>\n              </Radio.Group>\n              <Button onClick={showModal}>Confirmer ma commande</Button>\n            </div>\n            <Divider /> </CardText>\n          <CardText>Faites votre Choix :</CardText>\n          {foodDetails.map(objectName => {\n            return Object.keys(objectName).map(category => {\n              return (\n                <Accordion >\n                  <AccordionSummary\n                    expandIcon={<ExpandMoreIcon />}\n                    aria-controls=\"panel1a-content\"\n                    id=\"panel1a-header\"\n                    style={{ backgroundColor: '#AADEC0', opacity: 0.4 }}\n                  >\n                    <Typography >{category}</Typography>\n                  </AccordionSummary>\n                  {objectName[category].map(entry => {\n                    return (<AccordionDetails style={{ borderWidth: 3, borderColor: 'white', borderStyle: 'solid', backgroundColor: '#F8F8F8' }}>\n                      <Typography>\n                        <InputNumber min={1} max={10} defaultValue={0} onChange={(e)=>{onChange(e,entry)}} style={{ width: 50 }} /> x  {entry}</Typography>\n                    </AccordionDetails>\n                    )\n                  })}\n                </Accordion>\n              )\n            })\n          })}\n\n        </Card>\n        <Modal title=\"Confirmation\" visible={isModalVisible} onOk={handleOk} >\n        <p>Votre Confirmation a été pris en compte !!</p>\n\n      </Modal>\n      </div>\n\n    </>\n\n  )\n}\n\nfunction mapStateToProps(state) {\n  console.log(state.token)\n  return { token: state.token };\n}\nexport default connect(mapStateToProps, null)(OrderPage);\n"]},"metadata":{},"sourceType":"module"}